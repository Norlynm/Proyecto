{% extends 'base.html' %}

{% block titulo %}Lista de Equipos{% endblock %}

{% block content %}
<div class="container mt-5">
    <header class="mb-4">
        <h1 class="text-center" style="font-size: 2.5rem; font-weight: bold; letter-spacing: 1px;">Lista de Equipos</h1>
    </header>

    <section class="table-container">
        <!-- Estilos embebidos -->
        <style>
            .table-container {
                background-color: #FFFDE7;
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.15);
                text-align: center; /* Centrar todo el contenido */
            }

            table {
                width: 100%;
                max-width: 1000px; /* Limitar el ancho máximo de la tabla */
                margin: 0 auto; /* Centramos la tabla */
                border-collapse: collapse;
            }

            th, td {
                padding: 15px;
                text-align: center; /* Centrar el texto dentro de las celdas */
                vertical-align: middle; /* Alinear verticalmente al centro */
                border-bottom: 1px solid #ddd;
            }

            th {
                background-color: #FFDD57; /* Fondo amarillo suave para el encabezado */
                color: #333; /* Color del texto del encabezado */
                font-weight: bold;
                font-size: 1.2rem;
            }

            td {
                background-color: #fff;
                color: #333;
            }

            /* Opciones de estilo para los botones */
            .btn {
                padding: 8px 16px;
                font-size: 1rem;
                border-radius: 8px;
                transition: background-color 0.3s ease;
                display: inline-block;
                text-decoration: none;
                color: white;
            }

            .btn-edit {
                background-color: #28a745; /* Verde */
                border: none;
            }

            .btn-edit:hover {
                background-color: #218838;
            }

            .btn-delete {
                background-color: #dc3545; /* Rojo */
                border: none;
            }

            .btn-delete:hover {
                background-color: #c82333;
            }

            /* Alinear el botón de volver al inicio */
            .back-button {
                margin-top: 20px;
            }

            .back-button a {
                padding: 10px 20px;
                background-color: #6c757d; /* Color gris oscuro */
                color: white;
                border-radius: 10px;
                text-decoration: none;
                font-size: 1.2rem;
            }

            .back-button a:hover {
                background-color: #5a6268;
            }

            .fas {
                margin-right: 5px;
            }

            /* Alinear el contenido de las listas de usuarios */
            ul {
                list-style-type: none; /* Quitar las viñetas */
                padding: 0;
            }

            ul li {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* Ajuste de la tabla para pantallas pequeñas */
            @media (max-width: 768px) {
                th, td {
                    font-size: 0.9rem;
                }
                table {
                    font-size: 0.9rem;
                }
            }
        </style>

        <h2 class="text-center mb-4">Equipos</h2>
        <table>
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Descripción</th>
                    <th>Usuarios</th>
                    <th colspan="2">Opciones</th>
                </tr>
            </thead>
            <tbody>
                {% for equipo in equipos %}
                <tr>
                    <td>{{ equipo.id }}</td>
                    <td>{{ equipo.nombre }}</td>
                    <td>{{ equipo.descripcion }}</td>
                    <td>
                        <ul>
                            {% for usuario in equipo.usuarios.all %}
                            <li><i class="fas fa-user"></i> {{ usuario.username }}</li>
                            {% endfor %}
                        </ul>
                    </td>
                    <td>
                        <a href="{% url 'proyectos:editarequipo' equipo.id %}" class="btn btn-edit">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                    </td>
                    <td>
                        <a href="{% url 'proyectos:eliminarequipo' equipo.id %}" class="btn btn-delete" onclick="return confirm('¿Estás seguro de que deseas eliminar este equipo?');">
                            <i class="fas fa-trash-alt"></i> Eliminar
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="back-button text-center">
            <a href="{% url 'proyectos:inicio' %}">
                <i class="fas fa-home"></i> Atras
            </a>
        </div>
    </section>
</div>
{% endblock %}
