{% extends 'base.html' %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
    <title>Perfil de Usuario</title>
</head>
<body>
    {% if user.is_authenticated %}
    <h1>Perfil de {{ user.username }}</h1>
    {% endif %}

    {% if mensaje %}
        <p>{{ mensaje }}</p>
    {% endif %}

    {% if error %}
        <p>{{ error }}</p>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        {{ form.as_p }}
        {% if cambiar %}
            <button type="submit" name="guardar">Guardar Cambios</button>
            <button href="{% url 'Menu:usuario' %}" type="submit" name="cancelar">Cancelar Cambios</button>
        {% else %}
            <button type="submit" name="cambiar">Cambiar datos</button>
        {% endif %}
    </form>

    <!-- Sección de proyectos del usuario -->
    <h2>Proyectos en los que participas</h2>
    <ul>
        {% if proyectos %}
            {% for proyecto in proyectos %}
                <li>{{ proyecto.nombre }} - {{ proyecto.descripcion }} (Estado: {{ proyecto.estado }})</li>
            {% endfor %}
        {% else %}
            <li>No tienes proyectos asignados</li>
        {% endif %}
    </ul>

    <!-- Sección de tareas del usuario -->
    <h2>Tareas asignadas</h2>
    <ul>
        {% if tareas %}
            {% for tarea in tareas %}
                <li>{{ tarea.nombre }} - {{ tarea.descripcion }} (Estado: {{ tarea.estado }}, Prioridad: {{ tarea.prioridad }})</li>
            {% endfor %}
        {% else %}
            <li>No tienes tareas asignadas</li>
        {% endif %}
    </ul>

</body>
</html>
{% endblock %}
