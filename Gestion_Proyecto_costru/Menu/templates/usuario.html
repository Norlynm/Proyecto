{% extends 'base.html' %}
{% load static %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'Menu/css/usuario.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Header del perfil -->
    <div class="profile-header">
        <!-- Foto de perfil del usuario (puedes cambiarla a tu modelo) -->
        <img src="{% static 'Menu/img/3.jpg' %}" alt="Avatar" class="avatar">
        <h1>Perfil de {{ user.username }}</h1>
        <p>Correo: {{ user.email }}</p>
    </div>

    <!-- Formulario para editar datos del usuario -->
    {% if form %}
        <div class="profile-card">
            <h2>Editar perfil</h2>
            <form method="POST">
                {% csrf_token %}
                {{ form.as_p }}
                <div class="mt-3">
                    {% if cambiar %}
                        <button class="btn btn-primary" type="submit" name="guardar">Guardar Cambios</button>
                        <button class="btn btn-secondary" type="submit" name="cancelar">Cancelar Cambios</button>
                    {% else %}
                        <button class="btn btn-primary" type="submit" name="cambiar">Cambiar datos</button>
                    {% endif %}
                </div>
            </form>
        </div>
    {% endif %}

    <!-- Proyectos asignados -->
    <div class="profile-card project-task-list">
        <h2>Proyectos en los que participas</h2>
        <ul>
            {% if proyectos_asignados %}
                {% for proyecto in proyectos_asignados %}
                    <li>
                        <div>
                            <i class="fas fa-briefcase"></i> <strong>{{ proyecto.nombre }}</strong> - {{ proyecto.descripcion }}
                        </div>
                        <a href="#" class="btn-task">Ver Proyecto</a>
                    </li>
                {% endfor %}
            {% else %}
                <li>No tienes proyectos asignados</li>
            {% endif %}
        </ul>
    </div>

    <!-- Tareas asignadas -->
    <div class="profile-card project-task-list">
        <h2>Tareas asignadas</h2>
        <ul>
            {% if tareas_asignadas %}
                {% for tarea in tareas_asignadas %}
                    <li>
                        <div>
                            <i class="fas fa-tasks"></i> <strong>{{ tarea.nombre }}</strong> - {{ tarea.descripcion }}
                        </div>
                        <a href="" class="btn-task">Ver Tarea</a>
                    </li>
                {% endfor %}
            {% else %}
                <li>No tienes tareas asignadas</li>
            {% endif %}
        </ul>
    </div>
</div>
{% endblock %}
